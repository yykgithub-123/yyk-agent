# yyk-agent-pg

`yyk-agent-pg` æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ã€åŸºäºå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„æ™ºèƒ½ä»£ç†ï¼ˆAgentï¼‰é¡¹ç›®ã€‚å®ƒç»“åˆäº†å…ˆè¿›çš„æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰æŠ€æœ¯ï¼Œå¹¶æä¾›äº†ä¸€å¥—å¯æ‰©å±•çš„å·¥å…·ç³»ç»Ÿï¼Œæ—¨åœ¨æˆä¸ºä¸€ä¸ªé«˜åº¦æ™ºèƒ½çš„ç¼–ç¨‹åŠ©æ‰‹å’Œè‡ªåŠ¨åŒ–ä»»åŠ¡å¤„ç†å¹³å°ã€‚

é¡¹ç›®é‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œåç«¯åŸºäº Java å’Œ Spring Bootï¼Œå‰ç«¯é‡‡ç”¨ Vue.js æ„å»ºï¼Œä¸ºç”¨æˆ·æä¾›äº†ä¸€ä¸ªç›´è§‚æ˜“ç”¨çš„äº¤äº’ç•Œé¢ã€‚

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

*   **æ™ºèƒ½ä»£ç†æ¡†æ¶**: å®ç°äº†å¤šç§ Agent å·¥ä½œæ¨¡å¼ï¼Œå¦‚ ReAct (Reason + Action) å’Œ Tool Callingï¼Œä½¿ AI èƒ½å¤Ÿè‡ªä¸»æ€è€ƒã€è°ƒç”¨å·¥å…·å¹¶å®Œæˆå¤æ‚ä»»åŠ¡ã€‚
*   **æ£€ç´¢å¢å¼ºç”Ÿæˆ (RAG)**: é›†æˆäº† RAG ç®¡é“ï¼Œåˆ©ç”¨ `PostgreSQL` å’Œ `pgvector` æ‰©å±•ä½œä¸ºå‘é‡æ•°æ®åº“ï¼Œé€šè¿‡ä»æœ¬åœ°çŸ¥è¯†åº“ä¸­æ£€ç´¢ç›¸å…³ä¿¡æ¯æ¥å¢å¼ºæ¨¡å‹çš„å›ç­”ï¼Œæœ‰æ•ˆå‡å°‘æ¨¡å‹å¹»è§‰ã€‚
*   **å¯æ‰©å±•çš„å·¥å…·é›†**: å†…ç½®äº†å¤šç§å®ç”¨å·¥å…·ï¼Œå¦‚**æ–‡ä»¶æ“ä½œ**ã€**ç»ˆç«¯å‘½ä»¤æ‰§è¡Œ**ã€**Web æœç´¢**ã€**PDF ç”Ÿæˆ**ç­‰ï¼Œå¹¶ä¸”å¯ä»¥è½»æ¾æ‰©å±•è‡ªå®šä¹‰å·¥å…·ã€‚
*   **å¤šæ¨¡å‹æ”¯æŒ**: é€šè¿‡ Spring AI æŠ½è±¡ï¼Œå¯ä»¥æ–¹ä¾¿åœ°æ¥å…¥å’Œåˆ‡æ¢å¤šç§å¤§è¯­è¨€æ¨¡å‹ï¼Œå¦‚ `Ollama` (ç”¨äºæœ¬åœ°éƒ¨ç½²)ã€`é€šä¹‰åƒé—® Dashscope` ç­‰ã€‚
*   **ç°ä»£åŒ–å‰åç«¯åˆ†ç¦»**:
    *   **åç«¯**: åŸºäº `Spring Boot 3` å’Œ `JDK 21`ï¼Œæä¾›ç¨³å®šã€é«˜æ€§èƒ½çš„ RESTful APIã€‚
    *   **å‰ç«¯**: åŸºäº `Vue.js 3` å’Œ `Vite`ï¼Œæä¾›äº†ä¸€ä¸ªç¾è§‚ã€å“åº”è¿…é€Ÿçš„èŠå¤©å¼äº¤äº’ç•Œé¢ã€‚
*   **å®¹å™¨åŒ–æ”¯æŒ**: æä¾›äº† `Dockerfile`ï¼Œæ”¯æŒä½¿ç”¨ Docker è¿›è¡Œå¿«é€Ÿéƒ¨ç½²ã€‚

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

|              | æŠ€æœ¯                                                       |
| :----------- | :--------------------------------------------------------- |
| **åç«¯**     | `Java 21`, `Spring Boot 3`, `Spring AI`, `Maven`, `Lombok` |
| **å‰ç«¯**     | `Vue.js 3`, `Vite`, `JavaScript`, `Axios`                  |
| **æ•°æ®åº“**   | `PostgreSQL` + `pgvector` æ‰©å±•                             |
| **API æ–‡æ¡£** | `SpringDoc` + `Knife4j`                                    |
| **å®¹å™¨åŒ–**   | `Docker`                                                   |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨çš„å¼€å‘ç¯å¢ƒä¸­å®‰è£…äº†ä»¥ä¸‹è½¯ä»¶ï¼š

*   **JDK 21** æˆ–æ›´é«˜ç‰ˆæœ¬
*   **Maven 3.9** æˆ–æ›´é«˜ç‰ˆæœ¬
*   **Node.js 18** æˆ–æ›´é«˜ç‰ˆæœ¬
*   **Docker** å’Œ **Docker Compose**
*   **PostgreSQL 15** æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œå¹¶å·²**å¯ç”¨ `pgvector` æ‰©å±•**ã€‚

### 2. åç«¯å¯åŠ¨ (`yyk-agent`)

1. **é…ç½®**

    *   è¿›å…¥ `yyk-agent` ç›®å½•ã€‚
    *   å¤åˆ¶ `src/main/resources/application-local.yml.example` ä¸º `application-local.yml`
    *   åœ¨ `application-local.yml` ä¸­å¡«å…¥æ‚¨çš„æ•°æ®åº“è¿æ¥ä¿¡æ¯å’Œ AI æ¨¡å‹ API Keyã€‚

   ```yaml
   spring:
     datasource:
       url: jdbc:postgresql://localhost:5432/your_db
       username: your_username
       password: your_password
     ai:
       dashscope:
         api-key: "your-api-key-here"
   ```

2. **æ„å»ºå’Œè¿è¡Œ**

    * ä½¿ç”¨ Maven æ„å»ºé¡¹ç›®ï¼š

      ```bash
      cd yyk-agent
      mvn clean install
      ```

    * è¿è¡Œ Spring Boot åº”ç”¨ï¼š

      ```bash
      java -jar target/yyk-agent-0.0.1-SNAPSHOT.jar
      ```

    * å¯åŠ¨æˆåŠŸåï¼Œåç«¯æœåŠ¡å°†è¿è¡Œåœ¨ `http://localhost:8222/api`ã€‚

    * æ‚¨å¯ä»¥è®¿é—® `http://localhost:8222/api/doc.html` æŸ¥çœ‹ API æ–‡æ¡£ã€‚

### 3. å‰ç«¯å¯åŠ¨ (`yyk-agent-frontend`)

1. **å®‰è£…ä¾èµ–**

   ```bash
   cd yyk-agent-frontend
   npm install
   ```

2. **è¿è¡Œå¼€å‘æœåŠ¡å™¨**

   ```bash
   npm run dev
   ```

3. **è®¿é—®åº”ç”¨**

    *   å‰ç«¯å¼€å‘æœåŠ¡å™¨å°†è¿è¡Œåœ¨ `http://localhost:8221` (æˆ–ç»ˆç«¯æç¤ºçš„å…¶ä»–ç«¯å£)ã€‚
    *   æ‰“å¼€æµè§ˆå™¨è®¿é—®è¯¥åœ°å€å³å¯å¼€å§‹ä¸æ™ºèƒ½ä»£ç†è¿›è¡Œäº¤äº’ã€‚

---

## ğŸ“ é…ç½®æ•æ„Ÿä¿¡æ¯

æœ¬é¡¹ç›®ä½¿ç”¨äº†å¤šä¸ªéœ€è¦APIå¯†é’¥çš„æœåŠ¡ã€‚ä¸ºäº†ä¿æŠ¤è¿™äº›æ•æ„Ÿä¿¡æ¯ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†ä»¥ä¸‹ç­–ç•¥ï¼š

1. **æœ¬åœ°å¼€å‘ç¯å¢ƒ**ï¼š
    - æ‰€æœ‰æ•æ„Ÿä¿¡æ¯å­˜å‚¨åœ¨ `application-local.yml` æ–‡ä»¶ä¸­
    - è¯¥æ–‡ä»¶å·²æ·»åŠ åˆ° `.gitignore`ï¼Œä¸ä¼šè¢«æäº¤åˆ°Gitä»“åº“
    - å¼€å‘è€…éœ€è¦æ ¹æ® `application-local.yml.example` æ¨¡æ¿åˆ›å»ºè‡ªå·±çš„æœ¬åœ°é…ç½®

2. **ç”Ÿäº§ç¯å¢ƒ**ï¼š
    - ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ç¯å¢ƒå˜é‡æ³¨å…¥æ•æ„Ÿä¿¡æ¯
    - å‚è€ƒ `application-prod.yml` ä¸­çš„ç¯å¢ƒå˜é‡åç§°
    - å¯ä»¥ä½¿ç”¨Dockerç¯å¢ƒå˜é‡ã€Kubernetes Secretsæˆ–å…¶ä»–å®‰å…¨çš„é…ç½®ç®¡ç†å·¥å…·

3. **éœ€è¦é…ç½®çš„æ•æ„Ÿä¿¡æ¯**ï¼š
    - PostgreSQLæ•°æ®åº“è¿æ¥ä¿¡æ¯
    - é€šä¹‰åƒé—® DashScope APIå¯†é’¥
    - æœç´¢APIå¯†é’¥

---

## ğŸ“– é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ yyk-agent/              # åç«¯ Spring Boot é¡¹ç›®
â”‚   â”œâ”€â”€ pom.xml
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ main/
â”‚       â”‚   â”œâ”€â”€ java/com/yyk/
â”‚       â”‚   â”‚   â”œâ”€â”€ agent/      # æ™ºèƒ½ä»£ç†æ ¸å¿ƒé€»è¾‘
â”‚       â”‚   â”‚   â”œâ”€â”€ app/        # åº”ç”¨ç›¸å…³ï¼Œå¦‚æ–‡æ¡£åŠ è½½
â”‚       â”‚   â”‚   â”œâ”€â”€ rag/        # RAG ç›¸å…³é…ç½®å’Œå®ç°
â”‚       â”‚   â”‚   â””â”€â”€ tools/      # å¯ä¾› Agent è°ƒç”¨çš„å·¥å…·
â”‚       â”‚   â””â”€â”€ resources/
â”‚       â”‚       â”œâ”€â”€ application.yml            # ä¸»é…ç½®æ–‡ä»¶
â”‚       â”‚       â”œâ”€â”€ application-local.yml      # æœ¬åœ°æ•æ„Ÿé…ç½®ï¼ˆä¸æäº¤åˆ°Gitï¼‰
â”‚       â”‚       â”œâ”€â”€ application-local.yml.example # æœ¬åœ°é…ç½®æ¨¡æ¿
â”‚       â”‚       â”œâ”€â”€ application-prod.yml       # ç”Ÿäº§ç¯å¢ƒé…ç½®æ¨¡æ¿
â”‚       â”‚       â””â”€â”€ document/     # RAG çš„æœ¬åœ°çŸ¥è¯†åº“æ–‡æ¡£
â”‚       â””â”€â”€ test/
â””â”€â”€ yyk-agent-frontend/     # å‰ç«¯ Vue.js é¡¹ç›®
    â”œâ”€â”€ package.json
    â”œâ”€â”€ vite.config.js
    â””â”€â”€ src/
        â”œâ”€â”€ api/            # API è¯·æ±‚
        â”œâ”€â”€ components/     # Vue ç»„ä»¶
        â”œâ”€â”€ views/          # é¡µé¢è§†å›¾
        â””â”€â”€ App.vue         # ä¸»åº”ç”¨ç»„ä»¶
```

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿ä»»ä½•å½¢å¼çš„è´¡çŒ®ï¼å¦‚æœæ‚¨æœ‰å¥½çš„æƒ³æ³•æˆ–å»ºè®®ï¼Œè¯·éšæ—¶æäº¤ Pull Request æˆ–åˆ›å»º Issueã€‚

1.  Fork æœ¬ä»“åº“
2.  åˆ›å»ºæ‚¨çš„ç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3.  æäº¤æ‚¨çš„æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4.  æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5.  æ‰“å¼€ä¸€ä¸ª Pull Request

---

## æµ‹è¯•æƒ…å†µ

![](yyk-agent/src/main/resources/images/1.png)
![](yyk-agent/src/main/resources/images/2.png)
![](yyk-agent/src/main/resources/images/3.png)
![](yyk-agent/src/main/resources/images/4.png)
![](yyk-agent/src/main/resources/images/5.png)

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](./LICENSE) è®¸å¯è¯ã€‚ 